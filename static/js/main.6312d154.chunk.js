(this["webpackJsonponline-elections"]=this["webpackJsonponline-elections"]||[]).push([[0],{78:function(e,t,a){e.exports=a(92)},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=a(27),l=a(10),s=a(37),d=a(123),u=a(120),m=Object(u.a)((function(e){return{topSpacing:{paddingTop:e.spacing(1)},footer:{height:"12vh",backgroundColor:e.palette.background.paper,padding:e.spacing(3)}}}));function h(){return r.a.createElement(s.a,{variant:"body2",color:"textPrimary",align:"center"},"Wykonano dla ",r.a.createElement(d.a,{color:"inherit",target:"_blank",href:"https://mftau.pl/"},"wsp\xf3lnoty MF Tau"),".")}function p(){return r.a.createElement(s.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(d.a,{color:"inherit",target:"_blank",href:"https://www.linkedin.com/in/bart%C5%82omiej-soko%C5%82owski-070943106/"},"Bart\u0142omiej Soko\u0142owski")," ",(new Date).getFullYear(),".")}function f(){var e=m();return r.a.createElement("footer",{className:e.footer},r.a.createElement("div",null,r.a.createElement(h,null)),r.a.createElement("div",{className:e.topSpacing},r.a.createElement(p,null)))}var g=a(54),v=a(135),b=a(134),E=a(125),y=a(30),k=a.n(y),w=(a(86),k.a.initializeApp({apiKey:"AIzaSyDw2RLBRjHdgpjtK4QsNFSpJyRDNKId7qc",authDomain:"onlineelections-641a1.firebaseapp.com",databaseURL:"https://onlineelections-641a1.firebaseio.com",projectId:"onlineelections-641a1",storageBucket:"onlineelections-641a1.appspot.com",messagingSenderId:"588573699709",appId:"1:588573699709:web:4fa3d587ae587e903f0b14",measurementId:"G-6JRK7DZ5NY"}).firestore());k.a;function C(){var e=Object(n.useState)(0),t=Object(g.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(0),l=Object(g.a)(c,2),s=l[0],d=l[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Wpisz kod wybor\xf3w, w kt\xf3rych chcesz wzi\u0105\u0107 udzia\u0142:"),r.a.createElement(v.a,{textAlign:"center"},r.a.createElement(b.a,{label:"Kod wybor\xf3w",onChange:function(e){o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),w.collection("elections").doc(a).get().then((function(e){e.exists?s.click():alert("Brak wybor\xf3w o kodzie ".concat(a))}))}},"Zatwierd\u017a")),r.a.createElement(i.b,{to:"/elections/".concat(a),ref:function(e){return d(e)}}))}var j=a(45),F=a(46),R=a(20),x=a(48),D=a(47),O=a(126),S=a(127),z=a(128),N=function(e){Object(x.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={dbData:null,currentRound:null,selectedCandidate:null,userCode:""},n.linkElement=r.a.createRef(),n.fetchDataFromFirestore=n.fetchDataFromFirestore.bind(Object(R.a)(n)),n.selectCandidate=n.selectCandidate.bind(Object(R.a)(n)),n.handleCodeChange=n.handleCodeChange.bind(Object(R.a)(n)),n.confirmSelection=n.confirmSelection.bind(Object(R.a)(n)),n}return Object(F.a)(a,[{key:"fetchDataFromFirestore",value:function(){var e=this,t=w.collection("elections").doc(this.props.match.params.code);t.get().then((function(a){var n=a.data();t.collection("rounds").doc(n.activeRound).get().then((function(t){e.setState({dbData:n,currentRound:t.data()})}))}))}},{key:"selectCandidate",value:function(e,t){""===t?this.setState({selectedCandidate:e}):this.setState({selectedCandidate:null})}},{key:"handleCodeChange",value:function(e){this.setState({userCode:e.target.value})}},{key:"confirmSelection",value:function(){var e=this,t=this.state.userCode;if(null!=this.state.selectedCandidate)if(""!==t){var a=w.collection("elections").doc(this.props.match.params.code);a.get().then((function(n){var r=n.data();if(r.voters.includes(t)){var o=a.collection("rounds").doc(r.activeRound);o.get().then((function(a){a.data().voters.includes(t)?alert("Oddano ju\u017c g\u0142os u\u017cywaj\u0105c podanego kodu!"):(o.update({voters:k.a.firestore.FieldValue.arrayUnion(t),votes:k.a.firestore.FieldValue.arrayUnion(e.state.currentRound.candidates[e.state.selectedCandidate])}),alert("G\u0142os pomy\u015blnie zapisany!"),e.linkElement.current.click())}))}else alert("Nie znaleziono podanego kodu na li\u015bcie kod\xf3w umo\u017cliwiaj\u0105cych g\u0142osowanie!")}))}else alert("Nie mo\u017cna zatwierdzi\u0107 g\u0142osu bez podania swojego kodu!");else alert("Nie mo\u017cna zatwierdzi\u0107 g\u0142osu bez wybrania kandydata!")}},{key:"componentDidMount",value:function(){this.fetchDataFromFirestore()}},{key:"render",value:function(){var e=this,t={height:"100%",display:"flex",flexDirection:"column",textAlign:"center"},a={flexGrows:1,height:"100%"},n="",o="",c=[];if(null!=this.state.currentRound){n=this.state.currentRound.name,o="w MF Tau ".concat(this.state.dbData.city);for(var l=function(n){var o="";null!=e.state.selectedCandidate&&e.state.selectedCandidate===n&&(o="primary.main"),c.push(r.a.createElement(O.a,{item:!0,key:n,xs:6,sm:4,md:2,onClick:function(){return e.selectCandidate(n,o)}},r.a.createElement(S.a,{style:t},r.a.createElement(v.a,{bgcolor:o,style:a},r.a.createElement(z.a,null,r.a.createElement(s.a,{align:"center",gutterBottom:!0,variant:"h6",component:"h2"},e.state.currentRound.candidates[n]))))))},d=0;d<this.state.currentRound.candidates.length;d++)l(d)}return r.a.createElement("div",null,r.a.createElement("h1",null,n,r.a.createElement("br",null),o),r.a.createElement(O.a,{container:!0,spacing:3,style:{marginTop:"30px",paddingLeft:"20px",paddingRight:"20px"}},c),r.a.createElement(v.a,{textAlign:"center",marginTop:"20px"},r.a.createElement(b.a,{label:"Kod g\u0142osowania",onChange:this.handleCodeChange})),r.a.createElement("div",{style:{minWidth:"30vh",display:"flex",justifyContent:"center",marginTop:"30px"}},r.a.createElement(E.a,{variant:"contained",onClick:this.fetchDataFromFirestore},"Od\u015bwie\u017c"),r.a.createElement(v.a,{width:"100px"}),r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.confirmSelection},"Zag\u0142osuj")),r.a.createElement(i.b,{to:"/results/".concat(this.props.match.params.code),ref:this.linkElement}))}}]),a}(n.Component),I=a(129),B=a(130),W=a(131),T=a(124),K=function(e){Object(x.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={dbData:null,currentRound:null},n.fetchDataFromFirestore=n.fetchDataFromFirestore.bind(Object(R.a)(n)),n}return Object(F.a)(a,[{key:"fetchDataFromFirestore",value:function(){var e=this,t=w.collection("elections").doc(this.props.match.params.code);t.get().then((function(a){var n=a.data();t.collection("rounds").doc(n.activeRound).get().then((function(t){e.setState({dbData:n,currentRound:t.data()})}))}))}},{key:"componentDidMount",value:function(){this.fetchDataFromFirestore()}},{key:"render",value:function(){var e=this,t="",a=[];if(null!=this.state.currentRound){t=this.state.currentRound.name;for(var n=this.state.currentRound.votes.length,o=function(t){var o=e.state.currentRound.candidates[t],c=e.state.currentRound.votes.filter((function(e){return e===o})).length,i=c/n*100;i=Math.round(100*(i+Number.EPSILON))/100,a.push(r.a.createElement(I.a,null,r.a.createElement(B.a,{primary:o}),r.a.createElement(W.a,null,"".concat(c," (").concat(i,"%)"))))},c=0;c<this.state.currentRound.candidates.length;c++)o(c)}return r.a.createElement("div",null,r.a.createElement("h1",null,"Wyniki wybor\xf3w w g\u0142osowaniu ",r.a.createElement("br",null),'"'.concat(t,'"')),r.a.createElement(T.a,{dense:!0},a),r.a.createElement("div",{style:{minWidth:"30vh",display:"flex",justifyContent:"center",marginTop:"30px"}},r.a.createElement(E.a,{variant:"contained",onClick:function(){return e.props.history.goBack()}},"Wstecz"),r.a.createElement(v.a,{width:"100px"}),r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.fetchDataFromFirestore},"Od\u015bwie\u017c")))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(133),A=a(65),J=a(132),L=(a(91),Object(A.a)({palette:{type:"dark"}})),V=Object(u.a)((function(e){return{mainView:{minHeight:"88vh",display:"flex",alignItems:"center",padding:"20px",justifyContent:"center"}}}));function G(){var e=V();return r.a.createElement(r.a.StrictMode,null,r.a.createElement(J.a,{theme:L},r.a.createElement(M.a,null),r.a.createElement("div",{className:e.mainView},r.a.createElement(i.a,{basename:"/onlineElections"},r.a.createElement(l.a,{path:"/",exact:!0,component:C}),r.a.createElement(l.a,{path:"/elections/:code",component:N}),r.a.createElement(l.a,{path:"/results/:code",component:K}))),r.a.createElement(f,null)))}c.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[78,1,2]]]);
//# sourceMappingURL=main.6312d154.chunk.js.map